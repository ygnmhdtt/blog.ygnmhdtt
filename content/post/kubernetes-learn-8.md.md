---
title: "Kubernetesについて学ぶ 8"
date: 2018-03-19T22:15:22+09:00
tags:
- kubernetes
---

引き続き。ちょっと空いてしまった。

<!--more-->

今日は[こちら](https://kubernetes.io/docs/tutorials/kubernetes-basics/explore-intro/)。

# Kubernetes Pods

```
モジュール2でDeploymentを作成すると、
KubernetesはアプリケーションインスタンスをホストするPodを作成しました。
ひとつのPodは、1つまたは複数のアプリケーションコンテナ（Dockerやrktなど）のグループと
それらのコンテナの共有リソースを表すKubernetesの抽象です。これらのリソースには、

* 共有ストレージ（ボリュームとして）
* 一意のクラスタIPアドレスとしてのネットワーク化
* コンテナのイメージバージョンや使用する特定のポートなど、各コンテナを実行する方法に関する情報

が含まれています。

Podはアプリケーション固有の「論理ホスト」をモデル化し、
比較的緊密に結合された異なるアプリケーションコンテナを含むことができます。
たとえば、PodにはNode.jsアプリケーションのコンテナと、
Node.js Webサーバーによって公開されるデータを提供する別のコンテナの両方が含まれている場合があります。
ポッド内のコンテナはIPアドレスとポートスペースを共有し、常に同じ場所に配置され、
同じスケジュールで共有され、同じノード上の共有コンテキストで実行されます。

ポッドはKubernetesプラットフォームのアトミックな単位です。
Kubernetes上のDeploymentを作成すると、
そのコンテナ内にコンテナを持つポッドが作成されます（コンテナを直接作成するのではなく）。
各ポッドは、スケジューリングされているノードに接続され、
（再起動ポリシーに従って）終了または削除されるまでそこにとどまります。
ノードに障害が発生した場合、クラスタ内の他の使用可能なノードで同じPodがスケジュールされます。
```

Kubernetesノード -> Pod -> コンテナ みたいになっているということ。
docker-composeとか、ECSみたいな感じか。

# Nodes

```
ポッドは常にノード上で実行されます。
ノードはKubernetesのワーカーマシンであり、
クラスタに応じて仮想マシンまたは物理マシンのいずれかになります。
各ノードはマスターによって管理されます。
ノードは複数のポッドを持つことができ、Kubernetesマスターはクラスタ内のノード全体でポッドのスケジューリングを自動的に処理します。
マスターの自動スケジューリングでは、各ノードで使用可能なリソースが考慮されます。

すべてのKubernetesノードは、少なくとも以下を実行します。

* Kubernetes MasterとNode間の通信を担当するプロセスであるKubelet、マシン上で動作するポッドとコンテナを管理します。
* レジストリからコンテナイメージを取得し、コンテナを解凍し、アプリケーションを実行するコンテナランタイム（Docker、rktなど）。
```

同じような話をしている。
