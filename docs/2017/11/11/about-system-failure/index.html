<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>システムの障害について考える | yaginumahidetatsu.com</title>


<link rel="stylesheet" href="https://yaginumahidetatsu.com/css/style.css"/></head>
<body>

<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://yaginumahidetatsu.com"><h1 class="title is-4">yaginumahidetatsu.com</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          <a class="nav-item" href="https://yaginumahidetatsu.com/post"><h1 class="is-4">Archive</h1></a>
        /
        <a class="nav-item" href="https://yaginumahidetatsu.com/about"><h1 class="is-4">About</h1></a>
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <div class="subtitle is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/system-failure">#System Failure</a>



  
  | <a class="subtitle is-6" href="/tags/monitoring">#monitoring</a>
  
  | <a class="subtitle is-6" href="/tags/aws">#AWS</a>
  
  | <a class="subtitle is-6" href="/tags/thinking">#Thinking</a>
  

      
    </div>
    <h2 class="subtitle is-6">November 11, 2017</h2>
    <h1 class="title">システムの障害について考える</h1>
      
    <div class="content">
      <p>システムの障害について考えている。考えがまとまっていないんだけど、まとめておく。</p>

<p></p>

<p>クラウドでインフラを組む時の設計原則に、 Design for Failure というものがある。
障害は必ず起こるものなのだから、それを前提にシステム設計をしましょう。という話だと思う。(たぶん)</p>

<h1 id="障害に備えた設計とはなにか">障害に備えた設計とはなにか</h1>

<p>障害に備えた設計っていうのは、</p>

<ul>
<li>障害を起こさないような設計</li>
<li>障害が起きた後の素早い復旧のための設計
のふたつがあると思う。
AWSでいうと、前者はEC2の冗長化とロードバランシング・RDSのマルチAZなどが当てはまり、
後者はRDSのフェイルオーバーやCloudWatchアラームなどが当てはまる。</li>
</ul>

<p>ここってあんまり区別せず作ってるな〜と感じる。
AWSに慣れてる人ほど、当たり前に作ってると思う。</p>

<h1 id="障害が起きた後はどうすればいいのか">障害が起きた後はどうすればいいのか</h1>

<p>障害が起きた後は、復旧しなければいけない。
復旧するためには、以下のようなことを考える必要があると思う。</p>

<ul>
<li>障害をパターン化(抽象化)し、対応手順を決める</li>
<li>対応手順を、エンジニア全員が把握し、慌てずに対処できるようになる</li>
<li>なにをもって復旧したといえるのかを考える</li>
</ul>

<p>障害をパターン化する必要はあるよな〜と感じている。
例えば、RDSに障害が起きて、ネットワーク要因でフェイルオーバーが効かなかったらどうすればいいのか？
インフラ要因でなく、オペミスが起きたらどうすればいいのか？
障害を抽象化することができれば、どこをバックアップしておけばいいのか、どこを監視しておけばいいのかを決めることができる。</p>

<p>また、復旧したということを確かめるにはどうすればいいのか。。
このテストが通ったらシステムは正常に稼働している、というテストがあればいいかもしれない。
監視項目に異常がないからシステムが正常に動いている、とは厳密には言えないので、難しい。</p>
    </div>
    
  </div>
</section>
<section class="section">
  <div class="container has-text-centered">
    <p>(c) <a href="https://github.com/ygnmhdtt">Hidetatsu Yaginuma</a> 2017</p>
    
  </div>
</section>

<script src="instantclick.min.js" data-no-instant></script>
<script data-no-instant>InstantClick.init();</script>
</body>
</html>

